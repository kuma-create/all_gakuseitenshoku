// settings.gradle — RN settings plugin ONLY (disable Expo settings plugin)
// Rationale: expo-modules-autolinking v2.x settings plugin not present in this install.
// Prebuild済みのため、まずは RN 側のみで評価/ビルドを通します。

import org.gradle.api.GradleException

pluginManagement {
  repositories {
    gradlePluginPortal()
    google()
    mavenCentral()
  }

  // Resolve @react-native/gradle-plugin via Node (pnpm対応)
  def rnGradlePluginDir = new File(
    providers.exec {
      workingDir(rootDir)
      commandLine(
        "node", "--print",
        "require.resolve('@react-native/gradle-plugin/package.json', { paths: [require.resolve('react-native/package.json')] })"
      )
    }.standardOutput.asText.get().trim()
  ).getParentFile()
  if (!rnGradlePluginDir.exists()) {
    throw new GradleException("@react-native/gradle-plugin not found. Install in apps/mobile: pnpm add -D @react-native/gradle-plugin@0.79.5")
  }
  includeBuild(rnGradlePluginDir.absolutePath)

  // NOTE: Expo settings plugin intentionally NOT included to avoid missing/compile errors.
}

plugins {
  id("com.facebook.react.settings")
  // DO NOT add Expo plugin here
}

rootProject.name = "android"
include(":app")